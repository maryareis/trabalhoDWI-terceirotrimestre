<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Caderno de Anotações</title>
    <link rel="stylesheet" href="inserir.css">
</head>
<body>

<div class="container">

    <h1>Caderno de Anotações</h1>

    <div id="listaTela">
        <button onclick="abrirCadastro()">Nova Tarefa</button>
        <button onclick="carregar()">Atualizar</button>
        <div id="lista"></div>
    </div>

    <div id="cadastroTela" class="hidden">
        <h2>Nova Tarefa</h2>
        <label>Prioridade</label>
        <select id="prioridade">
            <option>Baixa</option>
            <option>Normal</option>
            <option>Urgente</option>
        </select>

        <label>Descrição</label>
        <textarea id="descricao"></textarea>

        <label>Local</label>
        <input type="text" id="local">

        <label>Recursos Necessários</label>
        <textarea id="recursos"></textarea>

        <label>Data Limite</label>
        <input type="datetime-local" id="dataLimite">

        <label>Matrícula</label>
        <input type="number" id="matricula">

        <button onclick="salvar()">Salvar</button>
        <button class="cancelar" onclick="abrirLista()">Cancelar</button>
    </div>

</div>

<script>
function abrirLista() {
    document.getElementById("listaTela").classList.remove("hidden");
    document.getElementById("cadastroTela").classList.add("hidden");
    carregar();
}

function abrirCadastro() {
    document.getElementById("listaTela").classList.add("hidden");
    document.getElementById("cadastroTela").classList.remove("hidden");
}

function carregar() {
    const dados = JSON.parse(localStorage.getItem("tarefas")) || [];
    const area = document.getElementById("lista");

    if (dados.length === 0) {
        area.innerHTML = "<p class='small'>Nenhuma tarefa cadastrada.</p>";
        return;
    }

    let tabela = "<table>";
    tabela += "<tr><th>ID</th><th>Prioridade</th><th>Descrição</th><th>Local</th><th>Recursos</th><th>Data Limite</th><th>Matrícula</th></tr>";

    for (let i = 0; i < dados.length; i++) {
        const t = dados[i];
        const classeUrgente = t.prioridade === "Urgente" ? "urgente" : "";
        tabela += `<tr class="${classeUrgente}">
            <td>${i+1}</td>
            <td>${t.prioridade}</td>
            <td>${t.descricao}</td>
            <td>${t.local}</td>
            <td>${t.recursos}</td>
            <td>${t.dataLimite}</td>
            <td>${t.matricula}</td>
        </tr>`;
    }

    tabela += "</table>";
    area.innerHTML = tabela;
}

function salvar() {
    const prioridade = document.getElementById("prioridade").value;
    const descricao = document.getElementById("descricao").value.trim();
    const local = document.getElementById("local").value.trim();
    const recursos = document.getElementById("recursos").value.trim();
    const dataLimite = document.getElementById("dataLimite").value;
    const matricula = document.getElementById("matricula").value.trim();

    if (!descricao || !local || !dataLimite || !matricula) {
        alert("Por favor, preencha todos os campos obrigatórios.");
        return;
    }

    const tarefa = { prioridade, descricao, local, recursos, dataLimite, matricula };

    const lista = JSON.parse(localStorage.getItem("tarefas")) || [];
    lista.push(tarefa);
    localStorage.setItem("tarefas", JSON.stringify(lista));

    abrirLista();
}
</script>

</body>
</html>
